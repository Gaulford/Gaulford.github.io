!function(){return this.timeRemove=0,this.ctrlError=function(e){return function(t){return t?$(".error").fadeOut(300):(clearTimeout(e.timeRemove),$(".error").empty(),$(".error").fadeIn(300),e.timeRemove=setTimeout(function(){return $(".error").fadeOut(300,function(){return $(this).empty()})},5e3))}}(this),this.msgTeste=function(e){return function(t,r){switch(t){case"sorte":return $("<li><p><strong>"+e.infoTeste.nome+"</strong>: rolou um teste de sorte.</p><p><strong class='cp-font-red'>Resultado:</strong> <em class='cp-font-white'>"+r+"</em></p></li>").prependTo(".lista-resultados");case"init":return $("<li><p><strong>"+e.infoTeste.nome+"</strong>: rolou iniciativa.</p><p><strong class='cp-font-red'>Resultado:</strong> <em class='cp-font-white'>Iniciativa "+r+"</em></p></li>").prependTo(".lista-resultados");case"vantage":return e.ctrlError(),$("<p>Você precisa de pelo menos 1 ponto em Atributos ou Habilidades para conseguir realizar o teste.</p>").appendTo(".error");case"no-dice":return e.ctrlError(),$("<p>Você não possuí dados para realizar o teste.</p>").appendTo(".error");default:return $("<li><p><strong>"+e.infoTeste.nome+"</strong>: rolou <strong>"+e.infoTeste.rolagemPadrao+"</strong> dados para "+e.infoTeste.acao+".</p><p><strong class='cp-font-red'>Resultado:</strong> <em class='cp-font-white'>"+r+"</em></p></li>").prependTo(".lista-resultados")}}}(this),this.rolarDados=function(e){return function(t){var r,o,s,n,a,i,u,l;for(r=new Number(1),s=new Number(0),l=new Array,i=new Array;r<=e.infoTeste.rolagemPadrao;)o=Math.round(9*Math.random()+1),10===o?l.push(o):1===o?(l.push(o),s--,r++):(l.push(o),r++);for(console.log(l),n=0,a=l.length;a>n;n++)u=l[n],u>=e.infoTeste.dificuldade&&i.push(u);return i=t?i.length+e.infoTeste.sucessosAuto+s:i.length+e.infoTeste.sucessosAuto,0===i?(i="Falha.",msgTeste("default",i)):0>i?(i="Falha Crítica.",msgTeste("default",i)):(i+=" Sucessos.",msgTeste("default",i))}}(this),this.iniciativa=function(e){return function(){var t,r;return t=Math.round(10*Math.random()),r=e.infoTeste.atributo+e.infoTeste.habilidade+t,msgTeste("init",r)}}(this),this.sorte=function(e){return function(){var e;return e=Math.round(9*Math.random()+1),10===e?msgTeste("sorte",e="Sucesso"):1===e?msgTeste("sorte",e="Falha crítica"):msgTeste("sorte",e="Falha")}}(this),this.init=function(e){return function(){return $("#rolar,#iniciativa,#sorte").on("click",function(t){var r;return r=t.target.id,t.preventDefault(),e.ctrlError(!0),e.infoTeste={nome:$("#nome").val(),acao:$("#acao").val(),atributo:Number($("#atributo").val()),habilidade:Number($("#habilidade").val()),vantagens:Number($("#vantagens").val()),penalidade:Number($("#penalidades").val()),sucessosAuto:Number($("#sucesso").val()),dificuldade:Number($("#dificuldade").val()),rolagemPadrao:new Number},e.infoTeste.rolagemPadrao=e.infoTeste.atributo+e.infoTeste.habilidade+e.infoTeste.vantagens-e.infoTeste.sucessosAuto-e.infoTeste.penalidade,"iniciativa"===r?iniciativa():"sorte"===r?sorte():e.infoTeste.atributo<=0&&e.infoTeste.habilidade<=0&&e.infoTeste.vantagens>0?e.msgTeste("vantage"):e.infoTeste.rolagemPadrao<=0?e.msgTeste("no-dice"):rolarDados(!0)})}}(this),$(function(){return init()})}();