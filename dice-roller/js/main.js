!function(){return this.timeRemove=0,this.ctrlError=function(e){return function(t){return t?$(".error").fadeOut(300):(clearTimeout(e.timeRemove),$(".error").empty(),$(".error").fadeIn(300),e.timeRemove=setTimeout(function(){return $(".error").fadeOut(300,function(){return $(this).empty()})},5e3))}}(this),this.msgErro=function(e){return function(t){switch(t){case"vantage":return e.ctrlError(),$("<p>Você precisa de pelo menos 1 ponto em Atributos ou Habilidades para conseguir realizar o teste.</p>").appendTo(".error");default:return e.ctrlError(),$("<p>Você não possuí dados para realizar o teste.</p>").appendTo(".error")}}}(this),this.msgResultado=function(e){return function(t,o,a){var r,n,s;switch(n=$("<li>"),t){case"sorte":return r="<p><strong>"+e.infoTeste.nome+"</strong>: rolou um teste de sorte.</p>",s="<p><strong class='cp-font-red'>Resultado:</strong> <em class='cp-font-white'>"+o+"</em></p>",a="<p><strong class='cp-font-red'>Dado:</strong> <em class='cp-font-white'>"+a+"</em></p>",$(n).append(r),$(n).append(s),$(n).append(a),$(".lista-resultados > p").remove(),$(".lista-resultados ul").prepend($(n));case"init":return r="<p><strong>"+e.infoTeste.nome+"</strong>: rolou iniciativa.</p>",s="<p><strong class='cp-font-red'>Resultado:</strong> <em class='cp-font-white'>Iniciativa "+o+"</em></p>",a="<p><strong class='cp-font-red'>Rolagem:</strong> <em class='cp-font-white'> +"+a+"</em></p>",$(n).append(r),$(n).append(s),$(n).append(a),$(".lista-resultados > p").remove(),$(".lista-resultados ul").prepend($(n));default:return r="<p><strong>"+e.infoTeste.nome+"</strong>: rolou <strong class='cp-font-blue'>"+e.infoTeste.rolagemPadrao+"</strong> dados para "+e.infoTeste.acao+".</p>",s="<p><strong class='cp-font-red'>Resultado:</strong> <em class='cp-font-white'>"+o+"</em></p>",a="<p><strong class='cp-font-red'>Dados:</strong> <em class='cp-font-white'>"+a+"</em></p>",$(n).append(r),$(n).append(s),$(n).append(a),$(".lista-resultados > p").remove(),$(".lista-resultados ul").prepend($(n))}}}(this),this.rolarDados=function(e){return function(t){var o,a,r,n,s,i,u,d;for(o=new Number(1),r=new Number(0),d=new Array,i=new Array;o<=e.infoTeste.rolagemPadrao;)a=Math.round(9*Math.random()+1),10===a?d.push(a):1===a?(d.push(a),r++,o++):(d.push(a),o++);for(n=0,s=d.length;s>n;n++)u=d[n],u>=e.infoTeste.dificuldade&&i.push(u);return i="mascara"===t?i.length+e.infoTeste.sucessosAuto-r:i.length+e.infoTeste.sucessosAuto,0===i?(i="Falha.",e.msgResultado("default",i,d)):0>i?(i="Falha Crítica.",e.msgResultado("default",i,d)):(i+=" Sucessos.",e.msgResultado("default",i,d))}}(this),this.iniciativa=function(e){return function(){var t,o;return t=Math.round(10*Math.random()),o=e.infoTeste.atributo+e.infoTeste.habilidade+e.infoTeste.vantagens+t-e.infoTeste.penalidade,e.msgResultado("init",o,t)}}(this),this.sorte=function(e){return function(){var t,o;return t=Math.round(9*Math.random()+1),10===t?(o="Sucesso",e.msgResultado("sorte",o,t)):1===t?(o="Falha crítica",e.msgResultado("sorte",o,t)):(o="Falha",e.msgResultado("sorte",o,t))}}(this),this.init=function(e){return function(){return $(".cp-radio").on("click",function(e){var t;return t="#"+$(this).attr("id"),$(t).children("input[type=radio]").prop("checked",!0),$(".cp-radio").children(".button").html("&nbsp;"),$(t).children(".button").html("X")}),$("#rolar,#iniciativa,#sorte").on("click",function(t){var o,a;return t.preventDefault(),a=t.target.id,o=$(".cp-radio input[type=radio]:checked").parent(".cp-radio").attr("id"),e.ctrlError(!0),e.infoTeste={nome:$("#nome").val(),acao:$("#acao").val(),atributo:Number($("#atributo").val()),habilidade:Number($("#habilidade").val()),vantagens:Number($("#vantagens").val()),penalidade:Number($("#penalidades").val()),sucessosAuto:Number($("#sucesso").val()),dificuldade:Number($("#dificuldade").val()),rolagemPadrao:new Number},""===e.infoTeste.nome&&""===e.infoTeste.acao?(e.infoTeste.nome="Personagem/NPC",e.infoTeste.acao="realizar alguma ação"):""===e.infoTeste.nome?e.infoTeste.nome="Personagem/NPC":e.infoTeste.acao="realizar alguma ação",e.infoTeste.rolagemPadrao=e.infoTeste.atributo+e.infoTeste.habilidade+e.infoTeste.vantagens-e.infoTeste.sucessosAuto-e.infoTeste.penalidade,"rolar"===a?e.infoTeste.atributo<=0&&e.infoTeste.habilidade<=0&&e.infoTeste.vantagens>0?e.msgErro("vantage"):e.infoTeste.rolagemPadrao<=0?e.msgErro("default"):e.rolarDados(o):"iniciativa"===a?e.iniciativa():e.sorte()})}}(this),$(function(e){return function(){return e.init()}}(this))}();